#!/usr/bin/env bash

function notify_success() {
    CHOICE=$(notify-send.py "BlendOS Update" "System updated successfully. Reboot now?" \
        --hint boolean:action-icons:true \
        --action reboot:Reboot later:Later)

    if [[ "$CHOICE" == "reboot" ]]; then
        systemctl reboot
    fi
}

function notify_failure() {
    notify-send.py "BlendOS Update Failed" "Please run 'akshara update' manually." --icon dialog-error
}

# Run the update
if akshara update; then
    notify_success
else
    notify_failure
fi