#!/usr/bin/env bash

function notify_success() {
    CHOICE=$(blend-update-notify "BlendOS Update" "System updated successfully. Reboot now?" \
        --hint boolean:action-icons:true \
        --action reboot:system-reboot later:window-close)

    if [[ "$CHOICE" == "reboot" ]]; then
        systemctl reboot
    fi
}

function notify_failure() {
    blend-update-notify "BlendOS Update Failed" "Please run 'akshara update' manually." --icon dialog-error
}

# Run the update
if akshara update; then
    notify_success
else
    notify_failure
fi